# 🎉 LLM Chat Prompt Navigator v1.2.1 更新说明

## ✨ 新增特性

### 🎯 长按标记功能
- **长按节点标记/取消标记**：在时间线上长按节点（500ms）即可标记为重点，再次长按取消。
- **视觉填充动画**：长按时显示动态填充效果，标记时为主题色填充，取消标记时为灰色填充。
- **快捷键支持**：新增 `Option + S` (Mac) / `Alt + S` (Win/Linux) 快捷键，快速标记/取消当前节点。
- **持久化存储**：标记状态按对话 ID 独立存储，切换对话自动加载对应的标记状态。

### 🎨 主题系统重构
- **深度定制主题**：每个主题现在包含独立的节点默认色、激活色、重点色和时间线主干色。
- **暗色主题优化**：
  - 默认节点改为**白色**，在深色背景上更清晰。
  - 选中节点改为**亮灰色**，形成柔和对比。
- **天蓝色主题**：时间线和节点使用天蓝色系，重点标记改为**深蓝色**（不再是橙色）。
- **薰衣草主题**：时间线和节点使用紫色系，重点标记改为**深紫色**（不再是橙色）。
- **动态主题切换**：选项页修改主题后，所有标签页实时更新。

### 🌍 多站点支持
- **Claude.ai 支持**：全新适配 Claude 对话页面。
- **Gemini 支持**：全新适配 Gemini (gemini.google.com) 对话页面。
- **独立开关控制**：在选项页可单独开启/关闭 ChatGPT、Claude、Gemini 的导航功能。
- **自定义 URL**：支持添加自定义 LLM 站点域名，复用 ChatGPT 适配逻辑。

### 🎨 UI/UX 优化
- **Tooltip 重设计**：白色背景、黑色文字、微透明、更紧邻节点、最多两行显示。
- **选中节点配色优化**：被标记的节点在选中时，内部颜色使用重点色（而非默认的激活色）。
- **新增节点动画**：新节点加入时，使用淡入+缩放动画，更平滑自然。
- **Popup 界面美化**：使用 `<kbd>` 标签模拟真实按键外观，层次更分明。

## 🐛 修复问题
- **构建路径错误**：修正 `manifest.json` 中的文件路径引用，匹配 esbuild 输出目录结构。
- **主题初始化**：使用 `localStorage` 缓存主题，防止页面刷新时主题闪烁。

## 🛠 技术改进
- **模块化主题配置**：`TimelineTheme` 接口扩展，支持更细粒度的样式定制。
- **站点适配器扩展**：新增 `claudeAdapter` 和 `geminiAdapter`，并支持自定义 URL 匹配逻辑。
- **长按交互实现**：使用 `mousedown` + `setTimeout` 实现长按检测，并与点击事件解耦。

## 📦 版本信息
- **版本号**：v1.2.1
- **发布日期**：2025-01-22
- **支持站点**：ChatGPT, Claude, Gemini, 自定义 URL

---

### 快捷键速查
| 功能 | Mac | Windows/Linux |
|------|-----|---------------|
| 上一个回答 | `⌥ W` | `Alt W` |
| 下一个回答 | `⌥ S` | `Alt S` |
| 标记/取消标记当前节点 | `⌥ A` | `Alt A` |
| 显示/隐藏时间线 | `⌥ D` | `Alt D` |

---

**感谢使用 LLM Chat Prompt Navigator！**

